#!/bin/bash
#SBATCH --job-name=build-docker
#SBATCH --partition=2080ti
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --time=01:00:00
#SBATCH --output=logs/build.log
#SBATCH --error=logs/build.err

# === ç¯å¢ƒå‡†å¤‡ ===
echo "ğŸš€ å¼€å§‹æ„å»º Docker é•œåƒ..."
echo "ğŸ“… æ—¶é—´: $(date)"
echo "ğŸ“ èŠ‚ç‚¹: $(hostname)"
echo "ğŸ“‚ å½“å‰ç›®å½•: $(pwd)"

# === æ„å»ºé•œåƒ ===
docker build -t open-llm-vtuber:latest .

# === é•œåƒæ„å»ºå®Œæˆåå¯é€‰å¯¼å‡ºä¸º .tar æ–‡ä»¶ ===
docker save open-llm-vtuber:latest -o open-llm-vtuber.tar
echo "âœ… é•œåƒæ„å»ºå®Œæˆå¹¶å·²ä¿å­˜ä¸º open-llm-vtuber.tar"
